class: SchemaDefRequirement
types:
- name: FilloutSample
  doc: A tumor sample record to be used for variant fillout
  type: record
  fields:
    - name: sample_id
      type: string
      doc: sample identifier must match the ID used inside the maf file
    - name: normal_id
      type: string
    - name: sample_type
      type: string
      doc: should be one of "research" or "clinical"
    - name: maf_file
      type: File
      doc: the sample's input .maf file
    - name: bam_file
      doc: sample's alignment file
      type: File
      secondaryFiles:
          - ^.bai
          - .bai
    # These files get added during downstream processing
    - name: unfiltered_vcf
      type: File?
      doc: fillout vcf file produced for the sample with no filtering applied
    - name: filtered_vcf
      type: File?
      doc: fillout vcf that has had extra filters applied such as germline filtering
    - name: unfiltered_maf
      type: File?
      doc: fillout maf file produced for the sample
    - name: filtered_maf
      type: File?
      doc: fillout maf that has had extra filters applied such as germline filtering

- name: FilloutIndexSample
  doc: A FilloutSample needs .bam indexing and prefiltering applied
  type: record
  fields:
    - name: sample_id
      type: string
      doc: sample identifier must match the ID used inside the maf file
    - name: normal_id
      type: string
    - name: sample_type
      type: string
      doc: should be one of "research" or "clinical"
    - name: prefilter
      type: boolean
      doc: if the sample maf file needs to be pre-filtered (true) or not (false)
    - name: maf_file
      type: File
      doc: the sample's input .maf file
    - name: bam_file
      type: File
      doc: bam file that needs a .bai file generated


- name: FilloutIndexedSample
  doc: A FilloutIndexSample that had its .bam indexed and prefiltering applied
  type: record
  fields:
    - name: sample_id
      type: string
      doc: sample identifier must match the ID used inside the maf file
    - name: normal_id
      type: string
    - name: sample_type
      type: string
      doc: should be one of "research" or "clinical"
    - name: prefilter
      type: boolean
      doc: if the sample maf file needs to be pre-filtered (true) or not (false)
    - name: maf_file
      type: File
      doc: the sample's input .maf file
    - name: bam_file
      type: File
      doc: bam file that needs a .bai file generated
      secondaryFiles:
          - ^.bai
          - .bai

- name: MSIOutputPair
  doc: a tumor normal sample pair that has undergone microsatellite instability analysis
  type: record
  fields:
    - name: tumor_id
      type: string
    - name: normal_id
      type: string
    - name: pair_id
      type: string
    - name: msi_tsv
      doc: parsed output from msisensor
      type: File

- name: FacetsPair
  doc: a tumor normal sample pair used in Facets
  type: record
  fields:
    - name: tumor_id
      type: string
      doc: ...
    - name: normal_id
      type: string
    - name: pair_id
      type: string
    - name: purity_png
      type: File
      doc: ...
    - name: purity_seg
      type: File
      doc: Tumor1.Normal1_purity.seg
    - name: hisens_png
      type: File
      doc: ...
    - name: hisens_seg
      type: File
      doc: Tumor1.Normal1_hisens.seg
    - name: qc_txt
      type: File
      doc: Tumor1.Normal1.qc.txt
    - name: gene_level_txt
      type: File
      doc: Tumor1.Normal1.gene_level.txt
    - name: arm_level_txt
      type: File
      doc: Tumor2.Normal2.arm_level.txt
    - name: facets_txt
      type: File
      doc: Tumor1.Normal1.txt
    - name: purity_rds
      type: File
      doc: Tumor1.Normal1_purity.rds
    - name: hisens_rds
      type: File
      doc: Tumor1.Normal1_hisens.rds
    - name: annotated_maf
      type: File
      doc: Tumor1.Normal1_hisens.ccf.maf
    - name: hisens_cncf_txt
      type: File
      doc: Tumor1.Normal1_hisens.cncf.txt (from legacy facets output)


# TODO: get this working; right now only record types are supported here not File types
# - name: RefFasta
#   doc: reference genome .fasta file
#   type: File
#   secondaryFiles:
#     - .amb
#     - .ann
#     - .bwt
#     - .pac
#     - .sa
#     - .fai
#     - ^.dict
